

/**
 * 响应json数据
 * @param json
 * @returns
 */
function pageAjaxDone(json){
	if(TD.TD_STATUS_CODE.ok === json.code){
//		refreshPageContent(json.html);
		alertMsg.correct(json.msg);
	}else{
		alertMsg.error(json.msg);
	}
}

function htmlAjaxDone(obj,html){
	return refresh(obj,html);
}

function getPageContent(){
	return $(".page-content-area");
}

function refreshPageContent(html){
	var obj = getPageContent();
	return refresh(obj,html);
}

function refresh(obj,html){
	return $(obj).html(html);
}



/** 给元素添加ajax函数 */
$.fn.extend({
	ajaxUrl : function(op) {
		$.ajax({
			type : op.type || 'GET',
			url : op.url,
			data : op.data,
			cache : false,
			success : op.callback||refreshPageContent,
			error :TD.ajaxError
		});
	},
	loadUrl : function(url,data,callback){
		$(this).ajaxUrl({url:url,data:data,callback:callback});
	},
	load:function(){
		var url = $(this).attr("href");
		if(!url || url==="#"){
			return false;
		}
		$(this).loadUrl(url);
	}
});

/**
 * 加载完成进行页面事件绑定
 */
$(document).ready(function() {

	// 要选中的特定 a 标签
	var elm_filter = "a[target='page']";

	$(elm_filter).live('click', function() {
		$this = $(this);
		$this.load();
		
		// alert($(this).attr("href"));
		return false;
	});
});



